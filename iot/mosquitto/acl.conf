# Itercraft MQTT ACL Configuration
# Topic-based access control for IoT devices

# =============================================================================
# Admin user - full access
# =============================================================================
user admin
topic readwrite #

# =============================================================================
# Backend service account - can read all sensor data, write commands
# =============================================================================
user itercraft-backend
topic read sensors/#
topic read devices/#
topic write commands/#
topic readwrite status/#

# =============================================================================
# IoT Device patterns
# Each device gets access only to its own topics
# Device username format: device-<device_id>
# =============================================================================

# Pattern-based ACL for devices
# %u = username, %c = client id
pattern read commands/%u/#
pattern write sensors/%u/#
pattern write devices/%u/status
pattern readwrite devices/%u/#

# =============================================================================
# Shared topics (read-only for devices)
# =============================================================================
pattern read $SYS/broker/+
pattern read broadcast/#
